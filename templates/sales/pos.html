<!DOCTYPE html>
<html>
<head>
    <title>POS - Point of Sale</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    <h2>ðŸ›’ Point of Sale</h2>
    
    <div class="row">
        <div class="col-md-8">
            <h4>Products ({{ products.count }})</h4>
            <div class="row">
                {% for product in products %}
                <div class="col-md-4 mb-3">
                    <div class="card">
                        <div class="card-body">
                            <h6>{{ product.product_name }}</h6>
                            <small>SKU: {{ product.sku }}</small>
                            <p class="fw-bold">Rs. {{ product.selling_price }}</p>
                            <button class="btn btn-success btn-sm add-to-cart" 
                                    data-product="{{ product.id }}"
                                    data-name="{{ product.product_name }}"
                                    data-price="{{ product.selling_price }}">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
                {% empty %}
                <p>No products available. <a href="/admin/inventory/product/add/">Add products</a></p>
                {% endfor %}
            </div>
        </div>
        
        <div class="col-md-4">
            <h4>Cart</h4>
            <div id="cart-items"></div>
            <hr>
            <h5>Total: <span id="cart-total">Rs. 0</span></h5>
            
            <select id="customer-select" class="form-select mb-3">
                <option value="">Select Customer (Optional)</option>
                {% for customer in customers %}
                <option value="{{ customer.id }}">{{ customer.customer_name }}</option>
                {% endfor %}
            </select>
            
            <button id="checkout-btn" class="btn btn-primary w-100" disabled>Checkout</button>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Simple cart functionality
let cart = [];
let total = 0;

document.querySelectorAll('.add-to-cart').forEach(btn => {
    btn.addEventListener('click', function() {
        const productId = this.dataset.product;
        const name = this.dataset.name;
        const price = parseFloat(this.dataset.price);
        
        cart.push({id: productId, name, price, qty: 1});
        updateCart();
    });
});

function updateCart() {
    let html = '';
    total = 0;
    
    cart.forEach((item, index) => {
        total += item.price;
        html += `
            <div class="d-flex justify-content-between">
                <span>${item.name} x1</span>
                <span>Rs. ${item.price}</span>
                <button class="btn btn-sm btn-outline-danger" onclick="removeItem(${index})">Ã—</button>
            </div>
        `;
    });
    
    document.getElementById('cart-items').innerHTML = html;
    document.getElementById('cart-total').textContent = `Rs. ${total.toFixed(2)}`;
    document.getElementById('checkout-btn').disabled = cart.length === 0;
}

function removeItem(index) {
    cart.splice(index, 1);
    updateCart();
}
</script>
</body>
</html>
